# PHPファイル操作プログラムの開発仕様

## プロジェクト概要
シンプルなファイル操作を行うPHPプログラム「File Manipulator」を開発します。このプログラムはファイルの内容を逆転、コピー、複製、文字列置換などの機能を提供します。

## 技術仕様
- 言語: PHP
- ファイル名: file_manipulator.php
- 引数検証を含む堅牢な実装

## 実装する機能

### 1. reverse
ファイルの内容を逆順にして新しいファイルに保存します。
```
php file_manipulator.php reverse <入力ファイルパス> <出力ファイルパス>
```

### 2. copy
ファイルを別の場所にコピーします。
```
php file_manipulator.php copy <入力ファイルパス> <出力ファイルパス>
```

### 3. duplicate-contents
ファイルの内容を指定した回数だけ複製します。
```
php file_manipulator.php duplicate-contents <ファイルパス> <複製回数>
```

### 4. replace-string
ファイル内の特定文字列をすべて置換します。
```
php file_manipulator.php replace-string <ファイルパス> <検索文字列> <置換文字列>
```

## 技術要件

- コマンドライン引数の適切な処理
- 各機能に対するバリデーション
  - ファイルの存在確認
  - 数値パラメータの検証
  - パス・権限の確認
- エラーハンドリング
  - わかりやすいエラーメッセージ
  - 適切な終了コード
- 実行結果の適切な出力

## 実装のポイント

- `fopen()`, `fread()`, `fwrite()`, `fclose()`などのファイル操作関数を使用
- 引数の数と内容の検証
- ファイルが存在するか、アクセス可能かの確認
- 上書き前の確認プロンプト
- バイナリモードとテキストモードの適切な選択

## 成功基準

- すべての機能が正しく動作すること
- 不正な入力に対して適切なエラーメッセージを表示すること
- コードが明確で保守しやすいこと
- メモリ使用量を考慮した実装であること

## エラーハンドリング例

- 「ファイルが存在しません」
- 「出力先に書き込み権限がありません」
- 「有効な正の整数を指定してください」
- 「置換する文字列がファイル内に見つかりませんでした」

---

上記の要件に基づいて、PHP言語でFile Manipulatorプログラムを実装してください。